
Below is a COMPLETE, READY Postman test set for ALL booking operations :



ğŸ”‘ STEP 1: LOGIN & SAVE TOKENS
1ï¸âƒ£ USER LOGIN
POST /api/auth/login

{
  "email": "sawantprithviraj9@gmail.com",
  "password": "Pp@12345678"
}


ğŸ‘‰ Save token as:

USER_TOKEN

2ï¸âƒ£ WORKER LOGIN
POST /api/auth/login

{
  "email": "rajesh@example.com",
  "password": "sec123"
}


ğŸ‘‰ Save token as:

WORKER_TOKEN

ğŸ“… STEP 2: CREATE BOOKING (USER)
3ï¸âƒ£ Create Booking
POST /api/bookings

Headers
Authorization: Bearer {{USER_TOKEN}}

Body
{
  "workerId": "REPLACE_WITH_WORKER_ID",
  "workType": "Leakage",
  "bookingDate": "2025-02-15",
  "bookingTime": "10:00 AM",
  "timeSlot": "10:00 - 11:00"
}


âœ… Backend auto-calculates:

visitCharge = 150

serviceCharge = 300

amount = 450

platformFee = 23

workerEarnings = 427

ğŸ“„ STEP 3: USER VIEWS BOOKINGS
4ï¸âƒ£ Get User Bookings
GET /api/bookings/user

Headers
Authorization: Bearer {{USER_TOKEN}}

ğŸ‘· STEP 4: WORKER VIEWS BOOKINGS
5ï¸âƒ£ Get Worker Bookings
GET /api/bookings/worker

Headers
Authorization: Bearer {{WORKER_TOKEN}}

âœ… STEP 5: WORKER ACCEPTS BOOKING
6ï¸âƒ£ Accept Booking
PATCH /api/bookings/{{BOOKING_ID}}/accept

Headers
Authorization: Bearer {{WORKER_TOKEN}}

ğŸ“„ STEP 6: USER CHECKS STATUS
7ï¸âƒ£ Get User Bookings Again
GET /api/bookings/user


Status will now be:

CONFIRMED

ğŸ› ï¸ STEP 7: WORKER COMPLETES BOOKING
8ï¸âƒ£ Complete Booking
PATCH /api/bookings/{{BOOKING_ID}}/complete

Headers
Authorization: Bearer {{WORKER_TOKEN}}

âŒ STEP 8: CANCEL BOOKING (OPTIONAL)
9ï¸âƒ£ Cancel Booking (USER)
PATCH /api/bookings/{{BOOKING_ID}}/cancel

Headers
Authorization: Bearer {{USER_TOKEN}}


âš ï¸ Will fail if already COMPLETED.

ğŸ§ª NEGATIVE TEST CASES (VERY IMPORTANT)
âŒ Worker tries to cancel
403 Forbidden

âŒ User tries to accept
403 Forbidden

âŒ Cancel completed booking
400 Bad Request

ğŸ§  QUICK POSTMAN VARIABLES SETUP

In Postman Environment:

USER_TOKEN = <jwt>
WORKER_TOKEN = <jwt>
BOOKING_ID = <id from create response>

ğŸ¯ FINAL FLOW SUMMARY
USER â†’ Create booking
WORKER â†’ Accept
WORKER â†’ Complete
PLATFORM â†’ Earn 5%
